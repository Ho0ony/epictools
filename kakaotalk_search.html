<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


  <style id="compiled-css" type="text/css">
      .t1 {
  min-width: 120px
}

.t2 {
  min-width: 100px;
}

tr {
  border-bottom: 1px solid #333;
}
#do {
  padding: 10px 30px;
    }
#in, #answer {
  width:500px;
  height:100px;
}
    /* EOS */
  </style>

</head>
<body>
    <textarea id="in">
[ㄱ] [오후 1:31] 사과 오렌지 당근
[ㄴ] [오후 1:31] 괜찮네요 당근
[ㄷ] [오후 1:31] 오렌지 당근
[ㄷ] [오후 1:32] 테스트 당근 오렌지
[ㄹ] [오후 1:32] 코스모스 
[ㅁ] [오후 1:32] 장미

</textarea>

<textarea id="answer">
사과
당근
오렌지
</textarea>

  <button id="do">작동 !!</button>
<table>
<thead>
  <tr><th class="t1">name</th>
  <th class="t2">time</th>
  <th class="t3">match</th>
  <th class="t4">text</th>
</tr></thead>
<tbody id="tb">
</table>

    <script type="text/javascript">//<![CDATA[

      $("#do").on("click", function() {
          $("#tb").empty()
          var txt = $("#in").val();
          txt = txt.replaceAll(/\r|\n/g, '')
          txt = txt.replaceAll(/(\[.+?\]\s*\[오[전후]\s*\d+:\d+\])/g, '\n$1')
          m = txt.matchAll(/\[(.+?)\]\s*\[(오[전후]\s*\d+:\d+)\]\s*(.+)/g)

          var ans = $("#answer").val().trim().split("\n");


          var n = null;
          while( (n=m.next())!=null && !n.done) {
           var c = 0;
           var x = {name:n.value[1], time:n.value[2], text:n.value[3]}
           
           $.each(ans, (i,e)=> {
            if(x.text.includes(e)) {
            c++;
            }
           })
           x.match = c;
           $("<tr>").append($("<td>").text(x.name))
                   .append($("<td>").text(x.time))
                   .append($("<td>").text(x.match))
                   .append($("<td>").text(x.text))
                   .appendTo("#tb");
          }
      })

  //]]></script>


</body></html>
